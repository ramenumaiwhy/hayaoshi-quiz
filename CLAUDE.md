# hayaoshi-quiz プロジェクト指針

## コンセプト

「みんはや」の本質だけを抽出したシンプルな早押しクイズWebアプリ。

## 開発方針

### t-wada流の進め方
- **動くコードを最優先**: まず動くものを作り、そこから改善する
- **小さなステップで進める**: 一度に大きな変更をしない。1つの変更 → 確認 → 次の変更
- **テスト駆動**: 機能追加時はテストを先に書く（またはすぐ後に書く）
- **リファクタリングを恐れない**: 動いているコードでも、より良くできるなら変える
- **技術的負債の意識的管理**: 負債を作るなら記録し、計画的に返済する

### YAGNI/KISS原則
- 今必要なものだけを実装する
- シンプルさを最優先
- 「将来使うかも」は実装しない
- 過剰な抽象化をしない

### 外部ライブラリ
- **本番依存ゼロを維持する**（devDependencies は許容）
- どうしても必要な場合は、まず context7 MCP でモダンベストプラクティスを調査してから判断

## E2Eテスト

機能実装後は Playwright でブラウザテストを実行する。

```bash
# 開発サーバー起動（別ターミナル）
bun run dev

# テスト実行（ブラウザが起動して自動操作）
bun run test-features.mjs
```

テストスクリプト `test-features.mjs` は以下を検証:
- カテゴリ選択 → マスターモード選択 → スタート
- タイマー表示、早押し機能、再開機能
- 類似選択肢の表示（Grep/Glob, Ctrl+L/Ctrl+C など）
- ランキング表示

## UI/UX設計

### 入力方式
- **キーボード入力（IME）は使わせない** → モバイルフレンドリー
- 4択のタップ/クリックで回答
- 正解の文字を1文字ずつ選んでいく形式

### 回答の文字種
- 答えがカタカナ（ブラジル等）→ そのままカタカナで選択
- 答えがひらがな → そのままひらがなで選択
- 答えが漢字 → alternativeAnswersからひらがな/カタカナを取得して選択

### ゲームフロー
- 問題シャッフル（毎回ランダム順）
- 連続プレイ（「次の問題へ」で即座に次の問題開始、スタート画面を挟まない）
- 全問終了後にスコア表示画面
- 「もう一度挑戦」で再シャッフルして最初から

## 機能拡張の優先順位

1. **AI王データ取り込み** - コンテンツ拡充（既存スクリプト使用）
2. **デザイン調整** - `frontend-design` スキルを使用
3. **効果音追加** - Web Audio API（外部ライブラリ不要）

## 技術スタック

- React 19 + TypeScript
- Vite
- Bun

## データソース

- AI王データセット（CC BY-SA 4.0）
- 変換スクリプト: `scripts/convert-aio.ts`

## スキル/ツール使用

- デザイン調整: `frontend-design` スキル
- ライブラリ調査: context7 MCP
- デバッグ: `tmux-claude-debugging` スキル（必要時）

## 内圧について（桜井政博）

> **出典**: [内圧をカンカンに高める【仕事の姿勢】](https://www.youtube.com/watch?v=X6FcraeKrSM)

このプロジェクトでは「内圧」を大切にする。

### 内圧とは
- 自分の中に溜まった、外に広がり出そうとするエネルギーや情熱
- 風船や圧力鍋のように、内側から膨らむ力

### なぜ大事か
- **話すと満足してしまう（ガス抜き）**: 「いいね」をもらうだけで圧が抜ける
- 内圧を高めた状態で作ったものは熱量が高く、中身が濃い

### 内圧を高める方法
- 完成するまで人に話さない
- SNSに進捗やネタを投稿しない
- エネルギーをすべて作品にぶつける
- 発表時のリアクションを想像してモチベーション維持

### このプロジェクトでのルール
**Discord MCPで共有しようとしたら「内圧について大丈夫？」と確認する**

---

## 方向性

**みんはやパクリ → Claude Code学習アプリへ転換**

早押しクイズ形式で Claude Code の使い方をステップバイステップで学習できるアプリを目指す。
ランダム出題ではなく、順序立てて理解を深める設計。

## 構想段階（Future Ideas）

実装予定だが、まだ着手していない機能。YAGNI原則に従い、必要になったら実装する。

### 優先度: 最高

#### ~~ハイスコア記録~~ ✅ 実装済み
- `src/hooks/useHighScore.ts` で localStorage に保存
- スコア画面でハイスコア表示、新記録時は「🎊 新記録！」

#### ~~Claude Code 学習コンテンツ~~ ✅ Phase 1 実装済み
- `claude-code-guide` スキルの内容をクイズ化
- カテゴリ選択画面で「一般クイズ」と「Claude Code 学習」を選べる
- カテゴリ別にハイスコア保存
- このアプリを使いながら Claude Code を学ぶ（ドッグフーディング）

##### Phase 1: 基本操作 ✅ 実装済み（40問）
- スラッシュコマンド（/help, /clear, /compact 等）
- キーボードショートカット（Ctrl+C, Ctrl+D, Esc×2 等）
- 基本的なツール（Read, Edit, Write, Bash, Grep, Glob 等）

##### Phase 2: 中級操作（未実装）
- MCP サーバー設定
- hooks の使い方
- メモリ・コンテキスト管理

##### Phase 3: 上級・開発者向け（未実装）
- プラグイン開発（skills, agents, commands）
- カスタム設定
- Agent SDK

##### クイズ形式の選択肢（将来拡張用）

| 形式 | 適したコンテンツ | 学習効果 |
|------|------------------|----------|
| **4択選択** ✅ | 基本操作、コマンド名、概念理解 | 認識・再認記憶、早押しと相性◎ |
| **順序並べ替え** | 手順・ワークフロー、設定順序 | 手続き記憶、因果関係理解 |
| **穴埋め** | シンタックス、コマンド引数、設定値 | 再生記憶、正確な記述力 |

### 優先度: 高

#### ~~ソーシャル機能~~ ✅ 実装済み（Supabase）
- フレンドID（6文字英数字）で友達登録
- フレンドのベストスコア表示
- 対戦機能は未実装（将来拡張）

#### ~~問題数選択~~ ✅ 実装済み
- 10問 / 20問 / 全問 から選択可能

### 優先度: 中

#### フィルタリング機能
- **難易度別**: A（難）/ B（中）/ C（易）で絞り込み
- **ジャンル別**: 歴史、科学、エンタメ、スポーツ、言語、食

### 優先度: 低

#### データ拡充（AI王）
- AI王データセットは17,000問以上あるが、現在は100問のみ変換済み
- Claude Code学習がメインになるため、優先度を下げる

## 実装済み

- ✅ MVP（4択選択式UI、モバイル対応）
- ✅ 効果音（OscillatorNode合成音）
- ✅ ダークモード対応
- ✅ Vercelデプロイ
- ✅ ハイスコア記録（カテゴリ別 localStorage）
- ✅ カテゴリ選択（一般クイズ / Claude Code 学習）
- ✅ Claude Code 学習 Phase 1（40問）
- ✅ 問題数選択（10問 / 20問 / 全問）
- ✅ タイマー表示（問題開始時から計測）
- ✅ 再開機能（早押し後キャンセルして問題文継続）
- ✅ 類似選択肢（Grep/Glob, Ctrl+L/Ctrl+C など間違いやすい選択肢を優先）
- ✅ マスターモード Top 5 ランキング（名前入力付き）
- ✅ Supabase ランキング（デバイス間共有）
- ✅ Claude Code 学習 Phase 2（30問: MCP, Hooks, メモリ管理）
- ✅ ソーシャル機能（フレンドID, フレンド登録, スコア共有）
- ✅ E2Eテスト（Playwright）
